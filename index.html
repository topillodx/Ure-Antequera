<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Sorteo URE Antequera</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    margin: 0;
    font-family: "Segoe UI", Arial, sans-serif;
    background: linear-gradient(90deg,#2e7d32,#43a047);

}

header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: linear-gradient(90deg,#b71c1c,#e53935);
    color: white;
    padding: 12px 18px;
    box-shadow: 0 3px 6px rgba(0,0,0,0.2);
}

.header-left {
    display: flex;
    align-items: center;
}

.header-right {
    display: flex;
    align-items: center;
    gap: 10px;
}

.header-img-right {
    height: 42px;
    border-radius: 6px;
}


header img {
    height: 60px;
    margin-right: 15px;
}

header h1 {
    font-size: 20px;
    line-height: 1.2;
}

.admin-header {
    background: rgba(255,255,255,0.15);
    border: 1px solid white;
    color: white;
    font-size: 18px;
    padding: 8px 12px;
    border-radius: 50%;
    cursor: pointer;
}
.admin-header:hover {
    background: rgba(255,255,255,0.3);
}

.contenido {
    padding: 20px;
    max-width: 900px;
    margin: auto;
}

.card {
    background: white;
    border-radius: 12px;
    padding: 18px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.1);
    margin-top: 20px;
}

.sorteo-img img {
    width: 100%;
    height: auto;
    object-fit: contain;
    border-radius: 12px;
    background: #000;
}


.pagos {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(140px,1fr));
    gap: 12px;
    margin-top: 15px;
}

.pagos button {
    padding: 14px;
    font-size: 16px;
    font-weight: bold;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    color: white;
}

.bizum { background: #5f2eea; }
.transferencia { background: #00897b; }
.paypal { background: #003087; }

.pagos button:hover {
    opacity: 0.9;
}

.numeros {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 10px;
    margin-top: 20px;
}

@media (min-width: 600px) {
    .numeros {
        grid-template-columns: repeat(10, 1fr);
    }
}

.numero {
    background: #d9d9d9;
    padding: 12px;
    border-radius: 8px;
    text-align: center;
    cursor: pointer;
    font-weight: bold;
}

.apartado { background: #ffc107; }
.pagado { background: #4caf50; color: white; }

.nombre {
    font-size: 11px;
    font-weight: normal;
}
</style>
</head>

<body>

<header>
    <div class="header-left">
        <img src="Logo.png" alt="URE Antequera">
        <h1>EA7URT<br>URE Antequera (Union De Radioaficionados Del Torcal)</h1>
    </div>

    <div class="header-right">
        <img src="URE.png" alt="URE" class="header-img-right">
        <button class="admin-header" onclick="adminPanel()">‚öôÔ∏è</button>
    </div>
</header>

<div class="contenido">

<div class="card sorteo-img">
    <img src="sorteo.jpg" alt="Sorteo">
</div>

<div class="card" id="infoSorteo"></div>

<div class="card">
    <h3>üí≥ Formas de pago</h3>
    <div class="pagos">
        <button class="bizum" onclick="alert('üì± Bizum: ' + bizum)">BIZUM</button>
        <button class="transferencia" onclick="alert('üè¶ IBAN: ' + iban)">TRANSFERENCIA</button>
        <button class="paypal" onclick="alert('üíª PayPal: ' + paypal)">PAYPAL</button>
    </div>
</div>

<div class="card">
    <h3>üéüÔ∏è N√∫meros disponibles</h3>
    <div class="numeros" id="numeros"></div>
</div>

</div>

<script>
const ADMIN_PASSWORD = "EA7URT";
const DIAS_LIMITE = 3;

let data = JSON.parse(localStorage.getItem("rifa")) || {};

let infoTexto = localStorage.getItem("infoTexto") || `
<b>üéÅ Sorteo:</b> Yaesu FTM-510<br>
<b>üìÖ Fecha:</b> __ / __ / ____<br>
<b>üí∞ Donativo:</b> 10‚Ç¨<br>
<b>üìå Aviso:</b> Los n√∫meros se guardar√°n 3 d√≠as si no se recibe la donaci√≥n.<br>
<b>üìå Normas:</b> El sorteo se realizar√° cuando est√©n todos los n√∫meros ocupados
`;

let bizum = localStorage.getItem("bizum") || "600000000";
let iban = localStorage.getItem("iban") || "ES00 0000 0000 0000 0000 0000";
let paypal = localStorage.getItem("paypal") || "correo@paypal.com";

function guardar() {
    localStorage.setItem("rifa", JSON.stringify(data));
    localStorage.setItem("infoTexto", infoTexto);
    localStorage.setItem("bizum", bizum);
    localStorage.setItem("iban", iban);
    localStorage.setItem("paypal", paypal);
}

function limpiarCaducados() {
    const ahora = new Date();
    for (let n in data) {
        if (data[n].estado === "apartado") {
            const dias = (ahora - new Date(data[n].fechaApartado)) / (1000*60*60*24);
            if (dias >= DIAS_LIMITE) delete data[n];
        }
    }
    guardar();
}

function crearNumeros() {
    document.getElementById("infoSorteo").innerHTML = infoTexto;
    const cont = document.getElementById("numeros");
    cont.innerHTML = "";

    for (let i = 0; i < 100; i++) {
        const num = i.toString().padStart(2,"0");
        const d = document.createElement("div");
        d.className = "numero";

        if (data[num]) {
            d.classList.add(data[num].estado);
            d.innerHTML = `${num}<div class="nombre">${data[num].nombre}</div>`;
        } else {
            d.textContent = num;
        }

        d.onclick = () => clickNumero(num);
        cont.appendChild(d);
    }
}

function clickNumero(num) {
    if (!data[num]) {
        const nombre = prompt("Nombre del participante:");
        if (!nombre) return;
        data[num] = { nombre, estado:"apartado", fechaApartado:new Date().toISOString() };
        guardar(); crearNumeros(); return;
    }

    alert(`‚ùå El n√∫mero ${num} est√° en uso por ${data[num].nombre}`);

    const pass = prompt("Contrase√±a administrador:");
    if (pass !== ADMIN_PASSWORD) return;

    const accion = prompt("ADMIN\n1 = Confirmar pago\n2 = Borrar n√∫mero");
    if (accion === "1") data[num].estado = "pagado";
    if (accion === "2") delete data[num];

    guardar(); crearNumeros();
}

function adminPanel() {
    const pass = prompt("Contrase√±a administrador:");
    if (pass !== ADMIN_PASSWORD) return;

    infoTexto = prompt("Editar texto del sorteo:", infoTexto) || infoTexto;
    bizum = prompt("N√∫mero Bizum:", bizum) || bizum;
    iban = prompt("IBAN:", iban) || iban;
    paypal = prompt("PayPal (email):", paypal) || paypal;

    guardar(); crearNumeros();
}

limpiarCaducados();
crearNumeros();
</script>

</body>
</html>

